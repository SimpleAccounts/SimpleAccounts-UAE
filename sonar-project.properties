# SonarQube / SonarCloud Configuration for SimpleAccounts-UAE
# See: https://docs.sonarcloud.io/advanced-setup/analysis-parameters/

# Project Identification
sonar.projectKey=simpleaccounts-uae
sonar.projectName=SimpleAccounts UAE
sonar.projectVersion=0.0.5-SNAPSHOT
sonar.organization=simpleaccounts

# Source Configuration
sonar.sources=apps/backend/src/main/java,apps/frontend/src
sonar.tests=apps/backend/src/test/java,apps/frontend/src
sonar.test.inclusions=**/*Test.java,**/*Tests.java,**/*.test.js,**/*.spec.ts

# Language-specific settings
sonar.java.source=1.8
sonar.java.binaries=apps/backend/target/classes
sonar.java.test.binaries=apps/backend/target/test-classes
sonar.java.libraries=apps/backend/target/dependency/*.jar

# Coverage Reports
sonar.coverage.jacoco.xmlReportPaths=apps/backend/target/site/jacoco/jacoco.xml
sonar.javascript.lcov.reportPaths=apps/frontend/coverage/lcov.info

# Exclusions
sonar.exclusions=\
  **/node_modules/**,\
  **/build/**,\
  **/target/**,\
  **/*.min.js,\
  **/*.min.css,\
  **/vendor/**,\
  **/test/**,\
  **/__mocks__/**,\
  **/migrations/**

sonar.test.exclusions=\
  **/node_modules/**,\
  **/build/**,\
  **/target/**

# Coverage Exclusions (non-business code)
sonar.coverage.exclusions=\
  **/config/**,\
  **/configuration/**,\
  **/constant/**,\
  **/model/**,\
  **/entity/**,\
  **/dto/**,\
  **/*Application.java,\
  **/index.js,\
  **/serviceWorker.js,\
  **/polyfill.js

# Duplication Detection
sonar.cpd.exclusions=\
  **/*Test.java,\
  **/*Tests.java,\
  **/*.test.js

# Issue Severity Mapping
sonar.issue.ignore.multicriteria=e1,e2,e3

# Ignore deprecated API usage warnings in test files
sonar.issue.ignore.multicriteria.e1.ruleKey=java:S1874
sonar.issue.ignore.multicriteria.e1.resourceKey=**/test/**

# Ignore cognitive complexity in test files
sonar.issue.ignore.multicriteria.e2.ruleKey=java:S3776
sonar.issue.ignore.multicriteria.e2.resourceKey=**/test/**

# Ignore "use logger instead of System.out" in tests
sonar.issue.ignore.multicriteria.e3.ruleKey=java:S106
sonar.issue.ignore.multicriteria.e3.resourceKey=**/test/**

# Quality Gates
# These are enforced in SonarCloud dashboard
# - Coverage >= 70% (Phase 1)
# - Duplicated Lines < 3%
# - Maintainability Rating >= A
# - Reliability Rating >= A
# - Security Rating >= A
# - Security Hotspots Reviewed = 100%

# Analysis Mode
sonar.qualitygate.wait=true
sonar.qualitygate.timeout=300

# SCM
sonar.scm.provider=git

# Encoding
sonar.sourceEncoding=UTF-8
